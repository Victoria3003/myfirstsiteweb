{"remainingRequest":"/home/victoriatokplo92/code/myfirstsiteweb/appli/node_modules/babel-loader/lib/index.js!/home/victoriatokplo92/code/myfirstsiteweb/appli/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/victoriatokplo92/code/myfirstsiteweb/appli/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/victoriatokplo92/code/myfirstsiteweb/appli/src/views/Admin.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/victoriatokplo92/code/myfirstsiteweb/appli/src/views/Admin.vue","mtime":1614893772000},{"path":"/home/victoriatokplo92/code/myfirstsiteweb/appli/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/victoriatokplo92/code/myfirstsiteweb/appli/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/victoriatokplo92/code/myfirstsiteweb/appli/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/victoriatokplo92/code/myfirstsiteweb/appli/node_modules/vue-loader-v16/dist/index.js","mtime":1624994108000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgeyBkYiB9IGZyb20gIi4uL2ZpcmViYXNlRGIiOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAiZmlyZWJhc2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbnRhY3RzOiBbXSwKICAgICAgb3JpZ2luYWxDb250YWN0OiBbXSwKICAgICAgY29udGFjdFNlYXJjaDogIiIsCiAgICAgIGFkbWluOiBmYWxzZSwKICAgICAgdXNlcjogIiIKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBmaXJlYmFzZS5hdXRoKCkub25BdXRoU3RhdGVDaGFuZ2VkKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgIGlmICh1c2VyKSB7CiAgICAgICAgX3RoaXMuYWRtaW4gPSB0cnVlOwoKICAgICAgICBfdGhpcy5mZXRjaENvbnRhY3QoKTsKICAgICAgfQogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBmZXRjaENvbnRhY3Q6IGZ1bmN0aW9uIGZldGNoQ29udGFjdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBkYi5jb2xsZWN0aW9uKCJjb250YWN0cyIpLm9uU25hcHNob3QoZnVuY3Rpb24gKHNuYXBzaG90Q2hhbmdlKSB7CiAgICAgICAgX3RoaXMyLmNvbnRhY3RzID0gW107CiAgICAgICAgc25hcHNob3RDaGFuZ2UuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7CiAgICAgICAgICBfdGhpczIuY29udGFjdHMucHVzaCh7CiAgICAgICAgICAgIGtleTogZG9jLmlkLAogICAgICAgICAgICBlbWFpbDogZG9jLmRhdGEoKS5lbWFpbCwKICAgICAgICAgICAgYWlkZTogZG9jLmRhdGEoKS5haWRlLAogICAgICAgICAgICBkb21haW5lOiBkb2MuZGF0YSgpLmRvbWFpbmUsCiAgICAgICAgICAgIGNvbW1lbnRhaXJlOiBkb2MuZGF0YSgpLmNvbW1lbnRhaXJlLAogICAgICAgICAgICBzdGF0dXQ6IGRvYy5kYXRhKCkuc3RhdHV0CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBfdGhpczIub3JpZ2luYWxDb250YWN0ID0gX3RoaXMyLmNvbnRhY3RzOwogICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVDb250YWN0OiBmdW5jdGlvbiBkZWxldGVDb250YWN0KGlkKSB7CiAgICAgIGlmICh3aW5kb3cuY29uZmlybSgiRG8geW91IHJlYWxseSB3YW50IHRvIGRlbGV0ZT8iKSkgewogICAgICAgIGRiLmNvbGxlY3Rpb24oImNvbnRhY3RzIikuZG9jKGlkKS5kZWxldGUoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJDb250YWN0IGRlbGV0ZWQhIik7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHNlYXJjaENvbnRhY3Q6IGZ1bmN0aW9uIHNlYXJjaENvbnRhY3QoKSB7CiAgICAgIGlmICh0aGlzLmNvbnRhY3RTZWFyY2ggPT0gIiIpIHsKICAgICAgICB0aGlzLmNvbnRhY3RzID0gdGhpcy5vcmlnaW5hbENvbnRhY3Q7CiAgICAgICAgdGhpcy5mZXRjaENvbnRhY3QoKTsKICAgICAgfQoKICAgICAgdmFyIHNlYXJjaGVkQ29udGFjdCA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm9yaWdpbmFsQ29udGFjdC5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBjb250YWN0RU1haWwgPSB0aGlzLm9yaWdpbmFsQ29udGFjdFtpXVsiZW1haWwiXS50b0xvd2VyQ2FzZSgpOwogICAgICAgIHZhciBjb250YWN0U3RhdHV0ID0gdGhpcy5vcmlnaW5hbENvbnRhY3RbaV1bInN0YXR1dCJdLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgdmFyIGNvbnRhY3RBaWRlID0gdGhpcy5vcmlnaW5hbENvbnRhY3RbaV1bImFpZGUiXS50b0xvd2VyQ2FzZSgpOwogICAgICAgIHZhciBjb250YWN0RG9tYWluZSA9IHRoaXMub3JpZ2luYWxDb250YWN0W2ldWyJkb21haW5lIl0udG9Mb3dlckNhc2UoKTsKICAgICAgICB2YXIgY29udGFjdENvbW1lbnRhaXJlID0gdGhpcy5vcmlnaW5hbENvbnRhY3RbaV1bImNvbW1lbnRhaXJlIl0udG9Mb3dlckNhc2UoKTsKCiAgICAgICAgaWYgKGNvbnRhY3RFTWFpbC5pbmRleE9mKHRoaXMuY29udGFjdFNlYXJjaC50b0xvd2VyQ2FzZSgpKSA+PSAwKSB7CiAgICAgICAgICBzZWFyY2hlZENvbnRhY3QucHVzaCh0aGlzLm9yaWdpbmFsQ29udGFjdFtpXSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoY29udGFjdFN0YXR1dC5pbmRleE9mKHRoaXMuY29udGFjdFNlYXJjaC50b0xvd2VyQ2FzZSgpKSA+PSAwKSB7CiAgICAgICAgICBzZWFyY2hlZENvbnRhY3QucHVzaCh0aGlzLm9yaWdpbmFsQ29udGFjdFtpXSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoY29udGFjdEFpZGUuaW5kZXhPZih0aGlzLmNvbnRhY3RTZWFyY2gudG9Mb3dlckNhc2UoKSkgPj0gMCkgewogICAgICAgICAgc2VhcmNoZWRDb250YWN0LnB1c2godGhpcy5vcmlnaW5hbENvbnRhY3RbaV0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKGNvbnRhY3REb21haW5lLmluZGV4T2YodGhpcy5jb250YWN0U2VhcmNoLnRvTG93ZXJDYXNlKCkpID49IDApIHsKICAgICAgICAgIHNlYXJjaGVkQ29udGFjdC5wdXNoKHRoaXMub3JpZ2luYWxDb250YWN0W2ldKTsKICAgICAgICB9CgogICAgICAgIGlmIChjb250YWN0Q29tbWVudGFpcmUuaW5kZXhPZih0aGlzLmNvbnRhY3RTZWFyY2gudG9Mb3dlckNhc2UoKSkgPj0gMCkgewogICAgICAgICAgc2VhcmNoZWRDb250YWN0LnB1c2godGhpcy5vcmlnaW5hbENvbnRhY3RbaV0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5jb250YWN0cyA9IHNlYXJjaGVkQ29udGFjdDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/victoriatokplo92/code/myfirstsiteweb/appli/src/views/Admin.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div v-if=\"admin\">\n    <div class=\"col-md-12\">\n      <div class=\"form-group\">\n        <input\n          type=\"text\"\n          name=\"search\"\n          v-model=\"contactSearch\"\n          placeholder=\"Chercher Contact\"\n          class=\"form-control\"\n          v-on:keyup=\"searchContact\"\n        />\n      </div>\n      <table class=\"table table-striped\">\n        <thead>\n          <tr>\n            <th>Email</th>\n            <th>Accompagnent</th>\n            <th>Commentaire</th>\n            <th>Statut</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"contact in contacts\" :key=\"contact.key\">\n            <td>{{ contact.email }}</td>\n            <td>{{ contact.aide }}</td>\n            <td>{{ contact.commentaire }}</td>\n            <td>{{ contact.statut }}</td>\n            <td>\n              <router-link\n                :to=\"{ name: 'edit', params: { id: contact.key } }\"\n                class=\"btn btn-primary\"\n                >Edit\n              </router-link>\n\n              <button @click.prevent=\"deleteContact(contact.key)\" class=\"btn btn-danger\">\n                Delete\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <div v-else>\n    <br /><br />\n    <h3>Sorry but you need to be admin to see those data ;)</h3>\n  </div>\n</template>\n\n<script>\nimport { db } from \"../firebaseDb\";\nimport firebase from \"firebase\";\n\nexport default {\n  data() {\n    return {\n      contacts: [],\n      originalContact: [],\n      contactSearch: \"\",\n      admin: false,\n      user: \"\",\n    };\n  },\n  created() {\n    firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        this.admin = true;\n        this.fetchContact();\n      }\n    });\n  },\n  methods: {\n    fetchContact: function () {\n      db.collection(\"contacts\").onSnapshot((snapshotChange) => {\n        this.contacts = [];\n        snapshotChange.forEach((doc) => {\n          this.contacts.push({\n            key: doc.id,\n            email: doc.data().email,\n            aide: doc.data().aide,\n            domaine: doc.data().domaine,\n            commentaire: doc.data().commentaire,\n            statut: doc.data().statut,\n          });\n        });\n        this.originalContact = this.contacts;\n      });\n    },\n    deleteContact(id) {\n      if (window.confirm(\"Do you really want to delete?\")) {\n        db.collection(\"contacts\")\n          .doc(id)\n          .delete()\n          .then(() => {\n            console.log(\"Contact deleted!\");\n          })\n          .catch((error) => {\n            console.error(error);\n          });\n      }\n    },\n    searchContact: function () {\n      if (this.contactSearch == \"\") {\n        this.contacts = this.originalContact;\n        this.fetchContact();\n      }\n      var searchedContact = [];\n      for (var i = 0; i < this.originalContact.length; i++) {\n        var contactEMail = this.originalContact[i][\"email\"].toLowerCase();\n        var contactStatut = this.originalContact[i][\"statut\"].toLowerCase();\n        var contactAide = this.originalContact[i][\"aide\"].toLowerCase();\n        var contactDomaine = this.originalContact[i][\"domaine\"].toLowerCase();\n        var contactCommentaire = this.originalContact[i][\"commentaire\"].toLowerCase();\n\n        if (contactEMail.indexOf(this.contactSearch.toLowerCase()) >= 0) {\n          searchedContact.push(this.originalContact[i]);\n        }\n        if (contactStatut.indexOf(this.contactSearch.toLowerCase()) >= 0) {\n          searchedContact.push(this.originalContact[i]);\n        }\n        if (contactAide.indexOf(this.contactSearch.toLowerCase()) >= 0) {\n          searchedContact.push(this.originalContact[i]);\n        }\n        if (contactDomaine.indexOf(this.contactSearch.toLowerCase()) >= 0) {\n          searchedContact.push(this.originalContact[i]);\n        }\n        if (contactCommentaire.indexOf(this.contactSearch.toLowerCase()) >= 0) {\n          searchedContact.push(this.originalContact[i]);\n        }\n      }\n      this.contacts = searchedContact;\n    },\n  },\n};\n</script>\n\n<style>\n.btn-primary {\n  margin-right: 12px;\n}\n</style>\n"],"sourceRoot":""}]}