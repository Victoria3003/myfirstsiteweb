{"remainingRequest":"/home/victoriatokplo92/code/myfirstsiteweb/appli/node_modules/babel-loader/lib/index.js!/home/victoriatokplo92/code/myfirstsiteweb/appli/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/victoriatokplo92/code/myfirstsiteweb/appli/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/victoriatokplo92/code/myfirstsiteweb/appli/src/views/AdminAnnonces.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/victoriatokplo92/code/myfirstsiteweb/appli/src/views/AdminAnnonces.vue","mtime":1614893772000},{"path":"/home/victoriatokplo92/code/myfirstsiteweb/appli/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/victoriatokplo92/code/myfirstsiteweb/appli/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/victoriatokplo92/code/myfirstsiteweb/appli/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/victoriatokplo92/code/myfirstsiteweb/appli/node_modules/vue-loader-v16/dist/index.js","mtime":1624994108000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgeyBkYiB9IGZyb20gIi4uL2ZpcmViYXNlRGIiOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAiZmlyZWJhc2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFubm9uY2VzOiBbXSwKICAgICAgb3JpZ2luYWxBbm5vbmNlOiBbXSwKICAgICAgYW5ub25jZVNlYXJjaDogIiIsCiAgICAgIGFkbWluOiBmYWxzZSwKICAgICAgdXNlcjogIiIKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBmaXJlYmFzZS5hdXRoKCkub25BdXRoU3RhdGVDaGFuZ2VkKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgIGlmICh1c2VyKSB7CiAgICAgICAgX3RoaXMuYWRtaW4gPSB0cnVlOwoKICAgICAgICBfdGhpcy5mZXRjaEFubm9uY2UoKTsKICAgICAgfQogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBmZXRjaEFubm9uY2U6IGZ1bmN0aW9uIGZldGNoQW5ub25jZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBkYi5jb2xsZWN0aW9uKCJhbm5vbmNlcyIpLm9uU25hcHNob3QoZnVuY3Rpb24gKHNuYXBzaG90Q2hhbmdlKSB7CiAgICAgICAgX3RoaXMyLmFubm9uY2VzID0gW107CiAgICAgICAgc25hcHNob3RDaGFuZ2UuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7CiAgICAgICAgICBfdGhpczIuYW5ub25jZXMucHVzaCh7CiAgICAgICAgICAgIGtleTogZG9jLmlkLAogICAgICAgICAgICBhdjogZG9jLmRhdGEoKS5hdiwKICAgICAgICAgICAgY29tbWVudGFpcmU6IGRvYy5kYXRhKCkuY29tbWVudGFpcmUsCiAgICAgICAgICAgIGFubmVlOiBkb2MuZGF0YSgpLmFubmVlLAogICAgICAgICAgICBwcml4OiBkb2MuZGF0YSgpLnByaXgsCiAgICAgICAgICAgIG1haXNvbjogZG9jLmRhdGEoKS5tYWlzb24sCiAgICAgICAgICAgIGNwOiBkb2MuZGF0YSgpLmNwLAogICAgICAgICAgICB2aWxsZTogZG9jLmRhdGEoKS52aWxsZSwKICAgICAgICAgICAgc3VyZmFjZTogZG9jLmRhdGEoKS5zdXJmYWNlLAogICAgICAgICAgICBjaGFtYnJlczogZG9jLmRhdGEoKS5jaGFtYnJlcywKICAgICAgICAgICAgZXF1aXBlbWVudDogZG9jLmRhdGEoKS5lcXVpcGVtZW50LAogICAgICAgICAgICBlbmVyZ2llOiBkb2MuZGF0YSgpLmVuZXJnaWUsCiAgICAgICAgICAgIGdlczogZG9jLmRhdGEoKS5nZXMsCiAgICAgICAgICAgIHN0YXR1dDogZG9jLmRhdGEoKS5zdGF0dXQKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIF90aGlzMi5vcmlnaW5hbEFubm9uY2UgPSBfdGhpczIuYW5ub25jZXM7CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZUFubm9uY2U6IGZ1bmN0aW9uIGRlbGV0ZUFubm9uY2UoaWQpIHsKICAgICAgaWYgKHdpbmRvdy5jb25maXJtKCJEbyB5b3UgcmVhbGx5IHdhbnQgdG8gZGVsZXRlPyIpKSB7CiAgICAgICAgZGIuY29sbGVjdGlvbigiYW5ub25jZXMiKS5kb2MoaWQpLmRlbGV0ZSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgY29uc29sZS5sb2coImFubm9uY2UgZGVsZXRlZCEiKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgc2VhcmNoYW5ub25jZTogZnVuY3Rpb24gc2VhcmNoYW5ub25jZSgpIHsKICAgICAgaWYgKHRoaXMuYW5ub25jZVNlYXJjaCA9PSAiIikgewogICAgICAgIHRoaXMuYW5ub25jZXMgPSB0aGlzLm9yaWdpbmFsQW5ub25jZTsKICAgICAgICB0aGlzLmZldGNoQW5ub25jZSgpOwogICAgICB9CgogICAgICB2YXIgc2VhcmNoZWRBbm5vbmNlID0gW107CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMub3JpZ2luYWxBbm5vbmNlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGFubm9uY2VFcXB0ID0gdGhpcy5vcmlnaW5hbEFubm9uY2VbaV1bImVxdWlwZW1lbnQiXS50b0xvd2VyQ2FzZSgpOwogICAgICAgIHZhciBhbm5vbmNlU3RhdHV0ID0gdGhpcy5vcmlnaW5hbEFubm9uY2VbaV1bInN0YXR1dCJdLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgdmFyIGFubm9uY2VWaWxsZSA9IHRoaXMub3JpZ2luYWxBbm5vbmNlW2ldWyJ2aWxsZSJdLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgdmFyIGFubm9uY2VTdXJmYWNlID0gdGhpcy5vcmlnaW5hbEFubm9uY2VbaV1bInN1cmZhY2UiXS50b0xvd2VyQ2FzZSgpOwogICAgICAgIHZhciBhbm5vbmNlQ29tbWVudGFpcmUgPSB0aGlzLm9yaWdpbmFsQW5ub25jZVtpXVsiY29tbWVudGFpcmUiXS50b0xvd2VyQ2FzZSgpOwoKICAgICAgICBpZiAoYW5ub25jZUVxcHQuaW5kZXhPZih0aGlzLmFubm9uY2VTZWFyY2gudG9Mb3dlckNhc2UoKSkgPj0gMCkgewogICAgICAgICAgc2VhcmNoZWRBbm5vbmNlLnB1c2godGhpcy5vcmlnaW5hbEFubm9uY2VbaV0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKGFubm9uY2VTdGF0dXQuaW5kZXhPZih0aGlzLmFubm9uY2VTZWFyY2gudG9Mb3dlckNhc2UoKSkgPj0gMCkgewogICAgICAgICAgc2VhcmNoZWRBbm5vbmNlLnB1c2godGhpcy5vcmlnaW5hbEFubm9uY2VbaV0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKGFubm9uY2VWaWxsZS5pbmRleE9mKHRoaXMuYW5ub25jZVNlYXJjaC50b0xvd2VyQ2FzZSgpKSA+PSAwKSB7CiAgICAgICAgICBzZWFyY2hlZEFubm9uY2UucHVzaCh0aGlzLm9yaWdpbmFsQW5ub25jZVtpXSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoYW5ub25jZVN1cmZhY2UuaW5kZXhPZih0aGlzLmFubm9uY2VTZWFyY2gudG9Mb3dlckNhc2UoKSkgPj0gMCkgewogICAgICAgICAgc2VhcmNoZWRBbm5vbmNlLnB1c2godGhpcy5vcmlnaW5hbEFubm9uY2VbaV0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKGFubm9uY2VDb21tZW50YWlyZS5pbmRleE9mKHRoaXMuYW5ub25jZVNlYXJjaC50b0xvd2VyQ2FzZSgpKSA+PSAwKSB7CiAgICAgICAgICBzZWFyY2hlZEFubm9uY2UucHVzaCh0aGlzLm9yaWdpbmFsQW5ub25jZVtpXSk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmFubm9uY2VzID0gc2VhcmNoZWRBbm5vbmNlOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/home/victoriatokplo92/code/myfirstsiteweb/appli/src/views/AdminAnnonces.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div v-if=\"admin\">\n    <div class=\"col-md-12\">\n      <div class=\"form-group\">\n        <input\n          type=\"text\"\n          name=\"search\"\n          v-model=\"annonceSearch\"\n          placeholder=\"Search annonce\"\n          class=\"form-control\"\n          v-on:keyup=\"searchannonce\"\n        />\n      </div>\n      <table class=\"table table-striped\">\n        <thead>\n          <tr>\n            <th>Achat/Vente</th>\n            <th>Maison/Appt Année</th>\n            <th>Prix</th>\n            <th>CP Ville</th>\n            <th>Surface Pieces Chbres</th>\n            <th>Descriptif</th>\n            <th>Equipement</th>\n            <th>Energie / GES</th>\n            <th>Statut</th>\n             <th>Edit/Delete</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"annonce in annonces\" :key=\"annonce.key\">\n            <td>{{ annonce.av }}</td>\n            <td>{{ annonce.maison }} / {{ annonce.annee }}</td>\n            <td>{{ annonce.prix }} €</td>\n            <td>{{ annonce.cp }}  {{ annonce.ville }}</td>\n            <td>\n              {{ annonce.surface }} m²/ {{ annonce.pieces }} pièces/\n              {{ annonce.chambres }} chambres\n            </td>\n            <td>{{ annonce.commentaire }}</td>\n            <td>{{ annonce.equipement }}</td>\n            <td>{{ annonce.energie }} / {{ annonce.ges }}</td>\n            <td>{{ annonce.statut }}</td>\n            <td>\n              <router-link\n                :to=\"{ name: 'editAnno', params: { id: annonce.key } }\"\n                class=\"btn btn-primary\"\n                >Edit\n              </router-link>\n\n              <button\n                @click.prevent=\"deleteAnnonce(annonce.key)\"\n                class=\"btn btn-danger\"\n              >\n                Delete\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <div v-else>\n    <br /><br />\n    <h3>Sorry but you need to be admin to see those data ;)</h3>\n  </div>\n</template>\n\n<script>\nimport { db } from \"../firebaseDb\";\nimport firebase from \"firebase\";\n\nexport default {\n  data() {\n    return {\n      annonces: [],\n      originalAnnonce: [],\n      annonceSearch: \"\",\n      admin: false,\n      user: \"\",\n    };\n  },\n  created() {\n    firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        this.admin = true;\n        this.fetchAnnonce();\n      }\n    });\n  },\n  methods: {\n    fetchAnnonce: function () {\n      db.collection(\"annonces\").onSnapshot((snapshotChange) => {\n        this.annonces = [];\n        snapshotChange.forEach((doc) => {\n          this.annonces.push({\n            key: doc.id,\n            av: doc.data().av,\n            commentaire: doc.data().commentaire,\n            annee: doc.data().annee,\n            prix: doc.data().prix,\n            maison: doc.data().maison,\n            cp: doc.data().cp,\n            ville: doc.data().ville,\n            surface: doc.data().surface,\n            chambres: doc.data().chambres,\n            equipement: doc.data().equipement,\n            energie: doc.data().energie,\n            ges: doc.data().ges,\n            statut: doc.data().statut,\n          });\n        });\n        this.originalAnnonce = this.annonces;\n      });\n    },\n    deleteAnnonce(id) {\n      if (window.confirm(\"Do you really want to delete?\")) {\n        db.collection(\"annonces\")\n          .doc(id)\n          .delete()\n          .then(() => {\n            console.log(\"annonce deleted!\");\n          })\n          .catch((error) => {\n            console.error(error);\n          });\n      }\n    },\n    searchannonce: function () {\n      if (this.annonceSearch == \"\") {\n        this.annonces = this.originalAnnonce;\n        this.fetchAnnonce();\n      }\n      var searchedAnnonce = [];\n      for (var i = 0; i < this.originalAnnonce.length; i++) {\n        var annonceEqpt = this.originalAnnonce[i][\"equipement\"].toLowerCase();\n        var annonceStatut = this.originalAnnonce[i][\"statut\"].toLowerCase();\n        var annonceVille = this.originalAnnonce[i][\"ville\"].toLowerCase();\n        var annonceSurface = this.originalAnnonce[i][\"surface\"].toLowerCase();\n        var annonceCommentaire = this.originalAnnonce[i][\n          \"commentaire\"\n        ].toLowerCase();\n\n        if (annonceEqpt.indexOf(this.annonceSearch.toLowerCase()) >= 0) {\n          searchedAnnonce.push(this.originalAnnonce[i]);\n        }\n        if (annonceStatut.indexOf(this.annonceSearch.toLowerCase()) >= 0) {\n          searchedAnnonce.push(this.originalAnnonce[i]);\n        }\n        if (annonceVille.indexOf(this.annonceSearch.toLowerCase()) >= 0) {\n          searchedAnnonce.push(this.originalAnnonce[i]);\n        }\n        if (annonceSurface.indexOf(this.annonceSearch.toLowerCase()) >= 0) {\n          searchedAnnonce.push(this.originalAnnonce[i]);\n        }\n        if (annonceCommentaire.indexOf(this.annonceSearch.toLowerCase()) >= 0) {\n          searchedAnnonce.push(this.originalAnnonce[i]);\n        }\n      }\n      this.annonces = searchedAnnonce;\n    },\n  },\n};\n</script>\n\n<style>\n.btn-primary {\n  margin-right: 12px;\n}\n</style>\n"],"sourceRoot":""}]}